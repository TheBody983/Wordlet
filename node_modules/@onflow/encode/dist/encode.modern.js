import{encode as n}from"@onflow/rlp";var e=function(n){return c(a(n))},r=function(n){return c(i(n))},t=function(n,e){return Buffer.from(n.padStart(2*e,0),"hex")},o=function(n){return t(n,8)},u=function(n){return Buffer.from(JSON.stringify(n),"utf8")},c=function(e){return n(e).toString("hex")},a=function(n){return d(n),[(r=n.script,Buffer.from(r,"utf8")),n.arguments.map(u),(e=n.refBlock,t(e,32)),n.gasLimit,o(n.proposalKey.address),n.proposalKey.keyId,n.proposalKey.sequenceNum,o(n.payer),n.authorizers.map(o)];var e,r},i=function(n){return p(n),[a(n),f(n)]},f=function(n){var e=s(n);return n.payloadSigs.map(function(n){return{signerIndex:e.get(n.address),keyId:n.keyId,sig:n.sig}}).sort(function(n,e){return n.signerIndex>e.signerIndex?1:n.signerIndex<e.signerIndex?-1:n.keyId>e.keyId?1:n.keyId<e.keyId?-1:void 0}).map(function(n){return[n.signerIndex,n.keyId,(e=n.sig,Buffer.from(e,"hex"))];var e})},s=function(n){var e=new Map,r=0,t=function(n){e.has(n)||(e.set(n,r),r++)};return t(n.proposalKey.address),t(n.payer),n.authorizers.forEach(t),e},d=function(n){k.forEach(function(e){return v(n,e)}),g.forEach(function(e){return v(n.proposalKey,e,"proposalKey")})},p=function(n){I.forEach(function(e){return v(n,e)}),n.payloadSigs.forEach(function(n,e){x.forEach(function(r){return v(n,r,"payloadSigs",e)})})},l=function(n){return"number"==typeof n},m=function(n){return"string"==typeof n},h=function(n){return null!==n&&"object"==typeof n},y=function(n){return h(n)&&n instanceof Array},k=[{name:"script",check:m},{name:"arguments",check:y},{name:"refBlock",check:m,defaultVal:"0"},{name:"gasLimit",check:l},{name:"proposalKey",check:h},{name:"payer",check:m},{name:"authorizers",check:y}],g=[{name:"address",check:m},{name:"keyId",check:l},{name:"sequenceNum",check:l}],I=[{name:"payloadSigs",check:y}],x=[{name:"address",check:m},{name:"keyId",check:l},{name:"sig",check:m}],v=function(n,e,r,t){var o=e.name,u=e.check,c=e.defaultVal;if(null==n[o]&&null!=c&&(n[o]=c),null==n[o])throw K(o,r,t);if(!u(n[o]))throw S(o,r,t)},E=function(n,e,r){return e?null==r?e+"."+n:e+"."+r+"."+n:n},K=function(n,e,r){return new Error("Missing field "+E(n,e,r))},S=function(n,e,r){return new Error("Invalid field "+E(n,e,r))};export{r as encodeTransactionEnvelope,e as encodeTransactionPayload};
//# sourceMappingURL=encode.modern.js.map
