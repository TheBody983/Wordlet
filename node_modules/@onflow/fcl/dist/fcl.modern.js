import{config as e}from"@onflow/config";export{config}from"@onflow/config";import{isTransaction as t,isScript as n,get as r,pipe as o,interaction as a}from"@onflow/interaction";export{isBad,isOk,pipe,why}from"@onflow/interaction";import{invariant as s}from"@onflow/util-invariant";import{latestBlock as i}from"@onflow/sdk-latest-block";export{latestBlock}from"@onflow/sdk-latest-block";import{account as c}from"@onflow/sdk-account";export{account}from"@onflow/sdk-account";import{sansPrefix as u,withPrefix as d}from"@onflow/util-address";export{display,sansPrefix,withPrefix}from"@onflow/util-address";import{encode as l}from"@onflow/rlp";import{resolve as p}from"@onflow/sdk-resolve";import{subscriber as f,spawn as m,snapshoter as y,INIT as h,SUBSCRIBE as g,UPDATED as w,UNSUBSCRIBE as k,SNAPSHOT as E,send as v}from"@onflow/util-actor";import{send as I}from"@onflow/sdk-send";export{send}from"@onflow/sdk-send";import{decode as b}from"@onflow/sdk-decode";export{decode}from"@onflow/sdk-decode";import{getTransactionStatus as x}from"@onflow/sdk-build-transaction-status";export{getTransactionStatus}from"@onflow/sdk-build-transaction-status";export{getEvents}from"@onflow/sdk-build-get-events";import{uid as S}from"@onflow/util-uid";export{template as cadence,template as cdc}from"@onflow/util-template";export{transaction}from"@onflow/sdk-build-transaction";export{script}from"@onflow/sdk-build-script";export{ping}from"@onflow/sdk-build-ping";export{getAccount}from"@onflow/sdk-build-get-account";export{getLatestBlock}from"@onflow/sdk-build-get-latest-block";export{getBlockById}from"@onflow/sdk-build-get-block-by-id";export{getBlockByHeight}from"@onflow/sdk-build-get-block-by-height";export{authorization,authorizations}from"@onflow/sdk-build-authorizations";export{arg,args}from"@onflow/sdk-build-arguments";export{proposer}from"@onflow/sdk-build-proposer";export{payer}from"@onflow/sdk-build-payer";export{limit}from"@onflow/sdk-build-limit";export{ref}from"@onflow/sdk-build-ref";export{param,params}from"@onflow/sdk-build-params";e().put("accessNode.api","http://localhost:8080").put("challenge.handshake","http://localhost:8700/authenticate");const A=e=>"function"==typeof e,R=e=>"string"==typeof e,P=e=>"function"==typeof e;function C(e){return s(null!=typeof e.xform,"No type specified for argument: "+e.value),P(e.xform)?e.xform(e.value):P(e.xform.asArgument)?e.xform.asArgument(e.value):void s(!1,"Invalid Argument",e)}const N=e=>"function"==typeof e;function T(e,t){try{return{f_type:"PreSignable",f_vsn:"1.0.0",roles:e.role,cadence:t.message.cadence,args:t.message.arguments.map(e=>t.arguments[e].asArgument),data:{},interaction:t}}catch(e){throw console.error("buildPreSignable",e),e}}async function L(e,t,n,r=3){s(r,"Account Resolve Recursion Limit Exceeded",{ix:e,accounts:t});let o=[];for(let s of t){var a=n||s;N(s.resolve)&&(s=await s.resolve(s,T(s,e))),Array.isArray(s)?await L(e,s,a,r-1):(e.accounts[s.tempId]=e.accounts[s.tempId]||s,e.accounts[s.tempId].role.proposer=e.accounts[s.tempId].role.proposer||s.role.proposer,e.accounts[s.tempId].role.payer=e.accounts[s.tempId].role.payer||s.role.payer,e.accounts[s.tempId].role.authorizer=e.accounts[s.tempId].role.authorizer||s.role.authorizer,e.accounts[s.tempId].role.proposer&&e.proposer===a.tempId&&(e.proposer=s.tempId),e.accounts[s.tempId].role.payer&&e.payer===a.tempId&&(e.payer=s.tempId),e.accounts[s.tempId].role.authorizer&&(n?o=[...o,s.tempId]:e.authorizations=e.authorizations.map(e=>e===a.tempId?s.tempId:e))),a.tempId!=s.tempId&&delete e.accounts[a.tempId]}n&&(e.authorizations=e.authorizations.map(e=>e===n.tempId?o:e).reduce((e,t)=>Array.isArray(t)?[...e,...t]:[...e,t],[]))}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var O=function(e,t){return Buffer.from(e.padStart(2*t,0),"hex")},z=function(e){return O(e,8)},D=function(e){return Buffer.from(JSON.stringify(e),"utf8")},F=function(e){return l(e).toString("hex")},U=function(e){return M(e),[(n=e.script,Buffer.from(n,"utf8")),e.arguments.map(D),(t=e.refBlock,O(t,32)),e.gasLimit,z(e.proposalKey.address),e.proposalKey.keyId,e.proposalKey.sequenceNum,z(e.payer),e.authorizers.map(z)];var t,n},B=function(e){var t=j(e);return e.payloadSigs.map(function(e){return{signerIndex:t.get(e.address),keyId:e.keyId,sig:e.sig}}).sort(function(e,t){return e.signerIndex>t.signerIndex?1:e.signerIndex<t.signerIndex?-1:e.keyId>t.keyId?1:e.keyId<t.keyId?-1:void 0}).map(function(e){return[e.signerIndex,e.keyId,(t=e.sig,Buffer.from(t,"hex"))];var t})},j=function(e){var t=new Map,n=0,r=function(e){t.has(e)||(t.set(e,n),n++)};return r(e.proposalKey.address),r(e.payer),e.authorizers.forEach(r),t},M=function(e){G.forEach(function(t){return X(e,t)}),V.forEach(function(t){return X(e.proposalKey,t,"proposalKey")})},H=function(e){return"number"==typeof e},J=function(e){return"string"==typeof e},q=function(e){return null!==e&&"object"==typeof e},K=function(e){return q(e)&&e instanceof Array},G=[{name:"script",check:J},{name:"arguments",check:K},{name:"refBlock",check:J,defaultVal:"0"},{name:"gasLimit",check:H},{name:"proposalKey",check:q},{name:"payer",check:J},{name:"authorizers",check:K}],V=[{name:"address",check:J},{name:"keyId",check:H},{name:"sequenceNum",check:H}],Y=[{name:"payloadSigs",check:K}],Z=[{name:"address",check:J},{name:"keyId",check:H},{name:"sig",check:J}],X=function(e,t,n,r){var o=t.name,a=t.check,s=t.defaultVal;if(null==e[o]&&null!=s&&(e[o]=s),null==e[o])throw $(o,n,r);if(!a(e[o]))throw Q(o,n,r)},W=function(e,t,n){return t?null==n?t+"."+e:t+"."+n+"."+e:e},$=function(e,t,n){return new Error("Missing field "+W(e,t,n))},Q=function(e,t,n){return new Error("Invalid field "+W(e,t,n))};function ee(e,t){return async function(n){const r=e.accounts[n];if(null!=r.signature)return;const{signature:o}=await r.signingFunction(function(e,t,n){try{return{f_type:"Signable",f_vsn:"1.0.0",message:t,addr:u(e.addr),keyId:e.keyId,roles:e.role,cadence:n.message.cadence,args:n.message.arguments.map(e=>n.arguments[e].asArgument),data:{},interaction:n}}catch(e){throw console.error("buildSignable",e),e}}(r,t,e));e.accounts[n].signature=o}}function te(e){return{script:e.message.cadence,refBlock:e.message.refBlock||null,gasLimit:e.message.computeLimit,arguments:e.message.arguments.map(t=>e.arguments[t].asArgument),proposalKey:{address:u(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum},payer:u(e.accounts[e.payer].addr),authorizers:e.authorizations.map(t=>u(e.accounts[t].addr)).reduce((e,t)=>e.find(e=>e===t)?e:[...e,t],[])}}const ne=o([async function(o){if(t(o)||n(o)){var a=r(o,"ix.cadence");s(A(a)||R(a),"Cadence needs to be a function or a string."),A(a)&&(a=await a({})),s(R(a),"Cadence needs to be a string at this point."),o.message.cadence=await e().where(/^0x/).then(e=>Object.entries(e).reduce((e,[t,n])=>e.replace(t,n),a))}return o},async function(e){if(t(e)||n(e))for(let[t,n]of Object.entries(e.arguments))e.arguments[t].asArgument=C(n);return e},async function(e){if(t(e))try{await L(e,Object.values(e.accounts)),await L(e,Object.values(e.accounts))}catch(e){throw console.error("=== SAD PANDA ===\n\n",e,"\n\n=== SAD PANDA ==="),e}return e},async function(e){return t(e)&&null==e.message.refBlock&&(e.message.refBlock=(await i()).id),e},async function(e){if(t(e)){var n=Object.values(e.accounts).find(e=>e.role.proposer);s(n,"Transactions require a proposer"),null==n.sequenceNum&&(e.accounts[n.tempId].sequenceNum=await c(n.addr).then(e=>e.keys).then(e=>e.find(e=>e.index===n.keyId)).then(e=>e.sequenceNumber))}return e},async function(e){if(t(e))try{let t=function(e){let t=new Set(e.authorizations);return t.add(e.proposer),t.delete(e.payer),Array.from(t)}(e);const r=(n=te(e),F(U(n)));await Promise.all(t.map(ee(e,r)));let o=function(e){let t=new Set([e.payer]);return Array.from(t)}(e);const a=function(e){return F(function(e){return function(e){Y.forEach(function(t){return X(e,t)}),e.payloadSigs.forEach(function(e,t){Z.forEach(function(n){return X(e,n,"payloadSigs",t)})})}(e),[U(e),B(e)]}(e))}(_({},te(e),{payloadSigs:t.map(t=>({address:e.accounts[t].addr,keyId:e.accounts[t].keyId,sig:e.accounts[t].signature}))}));await Promise.all(o.map(ee(e,a)))}catch(t){throw console.error("Signatures",t,{ix:e}),t}var n;return e},async function(e){for(let t of Object.keys(e.accounts))e.accounts[t].addr=u(e.accounts[t].addr);return e}]);e().put("sdk.resolve",ne);const re=async(t=[],n={})=>{const r=await e().get("sdk.resolve",n.resolve||p(n));return Array.isArray(t)&&(t=await o(a(),t)),JSON.stringify(await r(t),null,2)},oe=async e=>I([x(e)]).then(b),ae=e=>e.status>=4,se=e=>e.status>=3,ie=e=>e.status>=2,ce={[h]:async e=>{const t=await oe(e.self());ae(t)||setTimeout(()=>e.sendSelf("POLL"),2500),e.merge(t)},[g]:(e,t)=>{e.subscribe(t.from),e.send(t.from,w,e.all())},[k]:(e,t)=>{e.unsubscribe(t.from)},[E]:async(e,t)=>{t.reply(e.all())},POLL:async e=>{const t=await oe(e.self());var n,r;ae(t)||setTimeout(()=>e.sendSelf("POLL"),2500),n=e.all(),r=t,JSON.stringify(n)!==JSON.stringify(r)&&e.broadcast(w,t),e.merge(t)}},ue=e=>{if("object"==typeof e&&(e=e.transactionId),null==e)throw new Error("transactionId required");return e},de=e=>m(ce,ue(e));function le(e){function t(t){return f(ue(e),de,t)}function n(e){return function(n={}){const r=n.suppress||!1;return new Promise((n,o)=>{const a=t(t=>{t.statusCode&&!r?(o(t.errorMessage),a()):e(t)&&(n(t),a())})})}}return{snapshot:function(){return y(e,de)},subscribe:t,onceFinalized:n(ie),onceExecuted:n(se),onceSealed:n(ae)}}le.isUnknown=e=>e.status>=0,le.isPending=e=>e.status>=1,le.isFinalized=ie,le.isExecuted=se,le.isSealed=ae,le.isExpired=e=>5===e.status;const pe=async t=>setTimeout(()=>t.sendSelf("TICK"),await e().get("fcl.eventPollRate",1e4)),fe={TICK:async e=>{if(!e.hasSubs())return;let t=e.get("hwm");if(null==t)e.put("hwm",await i()),e.put("tick",await pe(e));else{let n=await i();e.put("hwm",n);const r=await I([getEvents(e.self(),t.height,n.height-1)]).then(b);for(let t of r)e.broadcast("UPDATED",t.data);e.put("tick",await pe(e))}},[g]:async(e,t)=>{e.hasSubs()||e.put("tick",await pe(e)),e.subscribe(t.from)},[k]:(e,t)=>{e.unsubscribe(t.from),e.hasSubs()||(clearTimeout(e.get("tick")),e.delete("tick"),e.delete("hwm"))}},me=e=>m(fe,e);function ye(e){return{subscribe:t=>f(e,me,t)}}const he={f_type:"Service",f_vsn:"1.0.0"},ge={f_type:"Identity",f_vsn:"1.0.0"},we={f_type:"USER",f_vsn:"1.0.0"},ke={f_type:"PollingResponse",f_vsn:"1.0.0"},Ee={f_type:"CompositeSignature",f_vsn:"1.0.0"};function ve(e){if(null==e)return null;switch(e.f_vsn){case"1.0.0":return e;default:return _({old:e},he,{type:"frame",endpoint:e.endpoint,params:e.params||{},data:e.data||{}})}}function Ie(e){if(null==e)return null;switch(e.f_vsn){case"1.0.0":return e;default:return _({},he,{type:"back-channel-rpc",endpoint:e.endpoint,method:e.method,params:e.params||{},data:e.data||{}})}}const be={"back-channel-rpc":Ie,"pre-authz":function(e){if(null==e)return null;switch(e.f_vsn){case"1.0.0":return e;default:return _({},he,{type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:_({},ge,{address:d(e.addr),keyId:e.keyId}),params:e.params,data:e.data})}},authz:function(e){if(null==e)return null;switch(e.f_vsn){case"1.0.0":return e;default:return _({},he,{type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:_({},ge,{address:d(e.addr),keyId:e.keyId}),params:e.params,data:e.data})}},authn:function(e){if(null==e)return null;switch(e.f_vsn){case"1.0.0":return e;default:return _({},he,{type:e.type,uid:e.id,endpoint:e.authn,id:e.pid,provider:{address:d(e.addr),name:e.name,icon:e.icon}})}},frame:ve};function xe(e){return l([e.provider.address||e.provider.name||"UNSPECIFIED",e.id]).toString("hex")}function Se(e=[],t){return e.find(e=>e.type===t)}function Ae(e){const t=new URL(e.endpoint);if(t.searchParams.append("l6n",window.location.origin),null!=e.params)for(let[n,r]of Object.entries(e.params||{}))t.searchParams.append(n,r);return t}function Re(e,t={}){const n=t.method||"POST",r="GET"===n?void 0:JSON.stringify(t.data||e.data||{});return fetch(Ae(e),{method:n,headers:_({},e.headers||{},t.headers||{},{"Content-Type":"application/json"}),body:r}).then(e=>e.json())}function Pe(e){if(null==e)return null;switch(e.f_vsn){case"1.0.0":return e;default:return _({},ke,{status:e.status,reason:e.reason,data:e.compositeSignature||e.data||{},updates:Ie(e.authorizationUpdates),local:ve((e.local||[])[0])})}}function Ce(e){if(null==e)return null;switch(e.f_vsn){case"1.0.0":return e;default:return _({},Ee,{addr:u(e.addr||e.address),signature:e.signature||e.sig,keyId:e.keyId})}}const Ne="FCL_IFRAME",Te=()=>{},Le=new Set(["monetizationstart","monetizationpending","monetizationprogress","monetizationstop"]);function _e(e,t={}){if(console.log("FRAME",{service:e,opts:t}),null==e)return{send:Te,close:Te};const n=t.onClose||Te,r=t.onMessage||Te,o=t.onReady||Te;window.addEventListener("message",c);const[a,i]=function(e){s(!document.getElementById(Ne),"Attempt at triggering multiple Frames",{src:e});const t=document.createElement("iframe");return t.src=e,t.id=Ne,t.allow="usb *",t.frameBorder="0",t.style.cssText="\n  position:fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  height: 100vh;\n  width: 100vw;\n  display:block;\n  background:rgba(0,0,0,0.25);\n  z-index: 2147483647;\n  box-sizing: border-box;\n",document.body.append(t),[t,()=>{document.getElementById(Ne)&&document.getElementById(Ne).remove()}]}(Ae(e));return{send:d,close:u};function c(e){try{if("object"!=typeof e.data)return;if(Le.has(e.data.type))return;"FCL:FRAME:CLOSE"===e.data.type&&u(),"FCL:FRAME:READY"===e.data.type&&o(e,{send:d,close:u}),r(e,{send:d,close:u}),"FCL::AUTHZ_READY"===e.data.type&&o(e,{send:d,close:u}),"FCL::CHALLENGE::CANCEL"===e.data.type&&u(),"FCL::CANCEL"===e.data.type&&u()}catch(e){console.error("Frame Callback Error",e),u()}}function u(){try{window.removeEventListener("message",c),i(),n()}catch(e){console.error("Frame Close Error",e)}}function d(e){try{console.log("SEND",e),a.contentWindow.postMessage(JSON.parse(JSON.stringify(e||{})),"*")}catch(t){console.error("Frame Send Error",e,t)}}}const Oe={"HTTP/GET":"GET","HTTP/POST":"POST"},ze=e=>(s(Oe[e.method],"Invalid Service Method for type back-channel-rpc",{service:e}),Oe[e.method]);async function De(e,t){t.data=e.data;const n=await Re(e,{data:t}).then(Pe);if("APPROVED"===n.status)return n.data;if("DECLINED"===n.status)throw new Error("Declined: "+(n.reason||"No reason supplied."));if("PENDING"===n.status){var r=!0;const{close:e}=_e(n.local,{onClose(){r=!1}});return async function e(t,n=(()=>!0)){if(s(t,"Missing Polling Service",{service:t}),!n())throw new Error("Externally Halted");const r=await Re(t,{method:ze(t)}).then(Pe);switch(r.status){case"APPROVED":return r.data;case"DECLINED":throw new Error("Declined: "+(r.reason||"No reason supplied."));default:return await new Promise(e=>setTimeout(e,500)),e(r.updates,n)}}(n.updates,()=>r).then(t=>(e(),Ce(t))).catch(t=>{throw console.error(t),e(),t})}throw console.error("Auto Decline: Invalid Response",{service:e,resp:n}),new Error("Auto Decline: Invalid Response")}const Fe={"HTTP/RPC":De,"HTTP/POST":De,"IFRAME/RPC":function(e,t){return new Promise((n,r)=>{const o=S();t.data=e.data,_e(e,{onReady(n,{send:r}){try{r({jsonrpc:"2.0",id:o,method:"fcl:sign",params:[t,e.params]})}catch(e){throw e}},onClose(){r("Declined: Externally Halted")},onMessage(e,{close:t}){try{if("object"!=typeof e.data)return;if("2.0"!==e.data.jsonrpc)return;if(e.data.id!==o)return;const a=Pe(e.data.result);switch(a.status){case"APPROVED":n(Ce(a.data)),t();break;case"DECLINED":r("Declined: "+(a.reason||"No reason supplied")),t();break;default:r("Declined: No reason supplied"),t()}}catch(e){throw console.error("execIframeRPC onMessage error",e),e}}})})}};async function Ue(e,t){try{return Fe[e.method](e,t)}catch(n){throw console.error("execService(service, msg)",n,{service:e,msg:t}),n}}const Be="CURRENT_USER",je="CURRENT_USER/UPDATED",Me='{\n  "f_type": "User",\n  "f_vsn": "1.0.0",\n  "addr":null,\n  "cid":null,\n  "loggedIn":null,\n  "expiresAt":null,\n  "services":[]\n}',He=async e=>(sessionStorage.setItem(Be,JSON.stringify(e)),e),Je=()=>e().get("persistSession",!0),qe={[h]:async e=>{if(e.merge(JSON.parse(Me)),await Je()){const t=await(async()=>{const e=JSON.parse(Me),t=JSON.parse(sessionStorage.getItem(Be));return null!=t&&e.f_vsn!==t.f_vsn?(sessionStorage.removeItem(Be),e):t||e})();Ge(t)&&e.merge(t)}},[g]:(e,t)=>{e.subscribe(t.from),e.send(t.from,je,_({},e.all()))},[k]:(e,t)=>{e.unsubscribe(t.from)},SNAPSHOT:async(e,t)=>{t.reply(_({},e.all()))},SET_CURRENT_USER:async(e,t,n)=>{e.merge(n),await Je()&&He(e.all()),e.broadcast(je,_({},e.all()))},DEL_CURRENT_USER:async(e,t)=>{e.merge(JSON.parse(Me)),await Je()&&He(e.all()),e.broadcast(je,_({},e.all()))}},Ke=()=>m(qe,Be);function Ge(e){return null==e.expiresAt||0===e.expiresAt||e.expiresAt>Date.now()}async function Ve(){return new Promise(async t=>{Ke();const n=await We();if(n.loggedIn&&Ge(n))return t(n);const[r,o]=function({handshake:e,l6n:t}){var n=new URL(e);return n.searchParams.append("l6n",t),function(e){if(document.getElementById("FCL_IFRAME"))return;const t=document.createElement("iframe");return t.src=e,t.id="FCL_IFRAME",t.allow="usb *",t.frameBorder="0",t.style.cssText="\n    position:fixed;\n    top: 0px;\n    right: 0px;\n    bottom: 0px;\n    left: 0px;\n    height: 100vh;\n    width: 100vw;\n    display:block;\n    background:rgba(0,0,0,0.25);\n    z-index: 2147483647;\n    box-sizing: border-box;\n  ",document.body.append(t),[t,()=>{document.getElementById("FCL_IFRAME")&&document.getElementById("FCL_IFRAME").remove()}]}(n.href)}({handshake:await e().get("challenge.handshake"),l6n:window.location.origin}),a=async({data:e})=>{if("FCL::CHALLENGE::CANCEL"===e.type||"FCL::CANCEL"===e.type)return o(),void window.removeEventListener("message",a);"FCL::CHALLENGE::RESPONSE"===e.type&&(o(),window.removeEventListener("message",a),v(Be,"SET_CURRENT_USER",await async function(e){var t=function(e=[],t=[]){return[...e,...t]}((e=function(e){return e.addr=e.addr?d(e.addr):null,e.paddr=e.paddr?d(e.paddr):null,e}(e)).services||[],await async function(e,t){if(null==e||null==t)return[];const n=new URL(e);n.searchParams.append("code",t);const r=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json());if(Array.isArray(r))return r;const o=[];if(Array.isArray(r.authorizations))for(let e of r.authorizations)o.push(_({type:"authz",keyId:r.keyId},e));return null!=r.provider&&o.push(_({type:"authn",id:"wallet-provider#authn"},r.provider)),o}(e.hks,e.code)).map(t=>function(e,t){try{return be[e.type](e,t)}catch(t){return console.error(`Unrecognized FCL Service Type [${e.type}]`,e,t),e}}(t,e));const n=function(e,t){return t.find(e=>"authn"===e.type)}(0,t);return _({},we,{addr:d(e.addr),cid:xe(n),loggedIn:!0,services:t,expiresAt:e.exp})}(e)),t(await We()))};window.addEventListener("message",a)})}function Ye(){Ke(),v(Be,"DEL_CURRENT_USER")}async function Ze(e){Ke();const t=await Ve(),n=Se(t.services,"authz"),r=Se(t.services,"pre-authz");return _({},e,r?{tempId:"CURRENT_USER",resolve:async(e,t)=>function(e){const t=(e=>({f_type:"PreAuthzResponse",f_vsn:"1.0.0",proposer:(e||{}).proposer,payer:(e||{}).payer||[],authorization:(e||{}).authorization||[]}))(e),n=[];null!=t.proposer&&n.push(["PROPOSER",t.proposer]);for(let e of t.payer||[])n.push(["PAYER",e]);for(let e of t.authorization||[])n.push(["AUTHORIZER",e]);return n.map(([e,t])=>({tempId:[t.identity.address,t.identity.keyId].join("|"),addr:t.identity.address,keyId:t.identity.keyId,signingFunction:e=>Ue(t,e),role:{proposer:"PROPOSER"===e,payer:"PAYER"===e,authorizer:"AUTHORIZER"===e}}))}(await Ue(r,t))}:{tempId:"CURRENT_USER",resolve:null,addr:u(n.identity.address),keyId:n.identity.keyId,sequenceNum:null,signature:null,signingFunction:async e=>Ue(n,e)})}function Xe(e){Ke();const t=m(async t=>{for(t.send(Be,g);;){const n=await t.receive();if("@EXIT"===n.tag)return void t.send(Be,k);e(n.data)}});return()=>v(t,"@EXIT")}function We(){return Ke(),v(Be,"SNAPSHOT",null,{expectReply:!0,timeout:0})}const $e=()=>({authenticate:Ve,unauthenticate:Ye,authorization:Ze,subscribe:Xe,snapshot:We}),Qe=()=>$e().authenticate(),et=()=>$e().unauthenticate(),tt=()=>($e().unauthenticate(),$e().authenticate()),nt=()=>$e().authenticate(),rt=()=>$e().authenticate(),ot=$e().authorization,at="0.0.67";export{at as VERSION,Qe as authenticate,ot as authz,$e as currentUser,ye as events,rt as logIn,tt as reauthenticate,re as serialize,nt as signUp,le as tx,et as unauthenticate};
//# sourceMappingURL=fcl.modern.js.map
