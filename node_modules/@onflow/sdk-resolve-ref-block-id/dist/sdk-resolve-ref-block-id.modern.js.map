{"version":3,"file":"sdk-resolve-ref-block-id.modern.js","sources":["../src/index.js"],"sourcesContent":["import {isTransaction, Ok, interaction, pipe} from \"@onflow/interaction\"\nimport {send} from \"@onflow/send\"\nimport {decodeResponse} from \"@onflow/decode\"\nimport {getLatestBlock} from \"@onflow/sdk-build-get-latest-block\"\n\nasync function getRefId (opts) {\n  var ix\n  ix = await pipe(interaction(), [getLatestBlock()])\n  ix = await send(ix, opts)\n  ix = await decodeResponse(ix)\n  return ix.id\n}\n\nexport function resolveRefBlockId(opts) {\n  return async ix => {\n    if (!isTransaction(ix)) return Ok(ix)\n    if (ix.message.refBlock) return Ok(ix)\n\n    ix.message.refBlock = await getRefId(opts)\n\n    return Ok(ix)\n  }\n}\n"],"names":["resolveRefBlockId","opts","isTransaction","ix","message","refBlock","async","pipe","interaction","getLatestBlock","send","decodeResponse","id","getRefId","Ok"],"mappings":"wPAagBA,EAAkBC,GAChC,gBACOC,EAAcC,IACfA,EAAGC,QAAQC,WAEfF,EAAGC,QAAQC,eAbfC,eAAyBL,GACvB,IAAIE,EAIJ,OAHAA,QAAWI,EAAKC,IAAe,CAACC,MAChCN,QAAWO,EAAKP,EAAIF,IACpBE,QAAWQ,EAAeR,IAChBS,GAQoBC,CAASZ,IAFLa,EAAGX,IADJW,EAAGX"}